<template>

	<lightning-card title={headerTitle} icon-name={headerIcon}>
		<div slot="actions">
			<lightning-button-group>
				<lightning-button-icon icon-name="action:refresh" alternative-text="Refresh data" onclick={refreshData}>
				</lightning-button-icon>
				<lightning-button-menu alternative-text="Show menu" variant="border" label="New" menu-alignment="Right">
					<lightning-menu-item value="MenuItemOne" label="Menu Item One"></lightning-menu-item>
					<lightning-menu-item value="MenuItemTwo" label="Menu Item Two"></lightning-menu-item>
					<lightning-menu-item value="MenuItemThree" label="Menu Item Three"></lightning-menu-item>
					<lightning-menu-item value="MenuItemFour" label="Menu Item Four"></lightning-menu-item>
				</lightning-button-menu>
			</lightning-button-group>
		</div>

		<div if:true={loading} class="slds-scrollable" style="height:5rem;width:24rem">
			<lightning-spinner alternative-text="Loading" size="large"></lightning-spinner>
		</div>
		<div if:true={error} class="slds-scrollable" style="height:5rem;">

			<div class="slds-text-heading_large slds-align_absolute-center">Error!</div>
			<div class="slds-text-color_destructive slds-align_absolute-center">{errorMsg}</div>
		</div>

		<ul if:false={error} class="slds-timeline">

			<lightning-accordion allow-multiple-sections-open active-section-name={activeSections}
				style="border-top: 1px solid #d3d3d3;">
				<template for:each={data} for:item="group">
					<lightning-accordion-section class="slds-is-open" name={group.id} key={group.id} label={group.name}>
						<template for:each={group.data} for:item="rec">
							<c-tag-activity-timeline-item key={rec.recordId} object={rec.object} title={rec.title}
								date-value={rec.dateValue} record-id={rec.recordId} theme-info={rec.themeInfo}
								type={rec.type}>
							</c-tag-activity-timeline-item>
						</template>
						<!-- <c-timeline-item-task if:true={rec.isTask} key={rec.recordId} title={rec.title}
					date-value={rec.dateValue} record-id={rec.recordId} description={rec.description}
					who-to-name={rec.whoToName} owner-id={rec.OwnerId}
					assigned-to-name={rec.assignedToName} who-id={rec.WhoId}
					task-subtype={rec.TaskSubtype}>
				</template> -->
					</lightning-accordion-section>
				</template>

			</lightning-accordion>

		</ul>

		<p slot="footer">Load more</p>
	</lightning-card>
</template>