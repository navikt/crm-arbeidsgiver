<template>

	<lightning-card title={headerTitle} icon-name={headerIcon}>
		<div slot="actions">
			<lightning-button-group>
				<lightning-button-icon icon-name={collapseIcon} alternative-text={collapseText}
					onclick={collapseAccordions}>
				</lightning-button-icon>
				<lightning-button-icon icon-name="utility:filter" alternative-text="Filter" onclick={filter}>
				</lightning-button-icon>
				<lightning-button-icon icon-name="action:refresh" alternative-text="Refresh data" onclick={refreshData}>
				</lightning-button-icon>
				<lightning-button-menu alternative-text={labels.newObj} variant="border" icon-name="utility:new"
					menu-alignment="Right">
					<template for:each={sObjectKinds} for:item="row">
						<c-tag-activity-timeline-new-object key={row.id} row={row} record-id={recordId}>
						</c-tag-activity-timeline-new-object>
					</template>
				</lightning-button-menu>
			</lightning-button-group>
		</div>

		<div if:true={loading} class="slds-scrollable" style={loadingStyle}>
			<lightning-spinner alternative-text="Loading" size="large"></lightning-spinner>
		</div>
		<div if:true={error} class="slds-scrollable" style="height:5rem;">
			<div class="slds-text-heading_large slds-align_absolute-center">Error!</div>
			<div class="slds-text-color_destructive slds-align_absolute-center">{errorMsg}</div>
		</div>

		<ul if:false={error} class="slds-timeline">
			<lightning-accordion allow-multiple-sections-open active-section-name={activeSections}
				onsectiontoggle={handleSectionToggle} style="border-top: 1px solid #d3d3d3;">
				<template for:each={data} for:item="group">
					<lightning-accordion-section class="slds-is-open" name={group.id} key={group.id} label={group.name}>
						<template for:each={group.models} for:item="row">
							<c-tag-activity-timeline-item key={row.record.recordId} row={row} labels={labels}
								moment={moment}>
							</c-tag-activity-timeline-item>
						</template>
						<lightning-button variant="Neutral" data-id={group.id} label={group.id} title="Load More"
							onclick={loadMore} class="slds-m-left_x-small"></lightning-button>
					</lightning-accordion-section>
				</template>
			</lightning-accordion>
		</ul>
	</lightning-card>
</template>